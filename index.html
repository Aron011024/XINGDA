<!DOCTYPE html>
<!-- saved from url=(0106)file:///C:/Users/%E5%88%98%E5%9D%9A/Desktop/%E6%96%87%E6%9C%AC%E9%82%AE%E7%AE%B1%E6%8F%90%E5%8F%965.5.html -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本邮箱提取</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f9;
            padding: 20px;
            margin: 0;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        h2 {
            text-align: center;
            margin-bottom: 10px;
            color: inherit;
            font-size: 2em;
        }

        .title-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .title-container h2 {
            margin: 0;
        }

        .title-container p {
            margin: 0;
            font-size: 1.2em;
            color: #4CAF50;
        }

        .container {
            width: 100%;
            max-width: 600px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            box-sizing: border-box;
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: background-color 0.3s, border-color 0.3s;
        }

        body.dark-mode .container {
            background-color: #1e1e1e;
            border-color: #333;
        }

        form,
        #result {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        input[type="text"],
        input[type="submit"],
        input[type="button"],
        button,
        .dropdown {
            width: 100%;
            padding: 12px;
            margin: 8px 0; /* 调整为与按钮一致的上下边距 */
            border: 1px solid #ccc;
            border-radius: 20px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
            outline: none;
            background-color: #fff;
            color: #333;
        }

        body.dark-mode input[type="text"],
        body.dark-mode input[type="submit"],
        body.dark-mode input[type="button"],
        body.dark-mode button,
        body.dark-mode .dropdown {
            background-color: #333;
            color: #e0e0e0;
            border-color: #555;
        }

        input[type="text"] {
            max-width: 400px;
            text-align: left;
        }

        #inputText::placeholder {
            text-align: center;
        }

        #inputText:focus::placeholder {
            visibility: hidden;
        }

        input[type="submit"],
        input[type="button"],
        button {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            max-width: 400px;
        }

        input[type="submit"]:hover,
        input[type="button"]:hover,
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        input[type="submit"]:active,
        input[type="button"]:active,
        button:active {
            transform: translateY(0);
        }

        #emails {
            width: 100%;
            max-width: 400px;
            height: 150px;
            padding: 10px;
            margin-top: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 10px;
            white-space: pre-wrap;
            word-break: break-all;
            overflow-y: auto;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, border-color 0.3s;
            color: #333;
        }

        body.dark-mode #emails {
            background-color: #333;
            color: #e0e0e0;
            border-color: #555;
        }

        #emailPrompt {
            margin-top: 20px;
            font-weight: bold;
        }

        .alert {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border-radius: 4px;
            display: none;
            z-index: 999;
            transition: opacity 0.3s ease;
        }

        .toggle-dark-mode,
        .dropdown {
            margin-top: 8px; /* 调整为与按钮一致的上下边距 */
        }

        .email-count {
            margin-top: 8px; /* 调整为与按钮一致的上下边距 */
            font-weight: bold;
        }

        .email-count .count-number {
            color: red;
        }

        .domain-count {
            margin-top: 8px; /* 调整为与按钮一致的上下边距 */
            font-weight: bold;
        }

        .domain-count .count-number {
            color: red;
        }

        #downloadButtonContainer {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        #downloadButtonContainer button {
            padding: 12px 24px;
            background-color: #fff;
            color: #4CAF50;
            border: 2px solid #4CAF50;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #downloadButtonContainer button:hover {
            background-color: #4CAF50;
            color: white;
        }

        #domainSelectionContainer {
            width: 100%;
            max-width: 400px;
            margin: 8px 0; /* 调整为与按钮一致的上下边距 */
            padding: 0;
            box-sizing: border-box;
        }

        .dropdown {
            width: 100%;
            max-width: 400px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 20px;
            padding: 12px;
            box-sizing: border-box;
            cursor: pointer;
            text-align: center;
            position: relative;
        }

        .dropdown:hover .dropdown-content {
            display: block;
        }

        .dropdown-content {
            display: none;
            width: 100%;
            max-width: 400px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: absolute;
            z-index: 1;
            box-sizing: border-box;
            max-height: 200px;
            overflow-y: auto;
            left: 0;
            margin-top: 10px;
        }

        .dropdown-content label {
            display: block;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }

        .dropdown-content label:last-child {
            border-bottom: none;
        }

        .dropdown-content input {
            margin-right: 10px;
        }

        .dropdown-content label:hover {
            background-color: #f4f4f9;
        }

        body.dark-mode .dropdown {
            background-color: #333;
            color: #e0e0e0;
            border-color: #555;
        }

        body.dark-mode .dropdown-content {
            background-color: #333;
            color: #e0e0e0;
            border-color: #555;
        }

        body.dark-mode .dropdown-content label:hover {
            background-color: #444;
        }

        #selectAllLabel {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="alert" id="alert" style="display: none; opacity: 1;">未找到邮箱地址或未选择后缀</div>
    <div class="alert" id="clear-alert" style="display: none; opacity: 1;">已清空~</div>
    <div class="title-container">
        <p>Aarón</p>
        <h2>文本邮箱提取工具</h2>
    </div>
    <div class="container">
        <form onsubmit="return extractEmails()">
            <input type="text" id="inputText" placeholder="输入包含邮箱的文本" onclick="clearText(this)">
            <div class="dropdown" onmouseover="toggleDomainSelection(true)" onmouseout="toggleDomainSelection(false)">
                <div id="domainSelection">选择指定邮箱后缀</div>
                <div class="dropdown-content" id="domainSelectionContainer" style="display: none;"><label id="selectAllLabel"><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)" checked=""> 全选</label></div>
            </div>
            <input type="submit" value="提取邮箱">
        </form>

        <button type="button" value="全部复制" onclick="copyEmails()">全部复制</button>
        <button type="button" value="清空" onclick="clearEmails()">清空</button>
        <button class="toggle-dark-mode" onclick="toggleDarkMode()">切换明/暗模式</button>

        <div id="emailPrompt">提取到的邮箱地址：</div>
        <pre id="emails"></pre>
        <div class="email-count" id="emailCount">邮箱数量: <span class="count-number">0</span></div>
        <div class="domain-count" id="domainCount">后缀数量: <span class="count-number">0</span></div>
    </div>

    <div id="downloadButtonContainer">
        <button onclick="downloadSavedEmails()">下载已保存邮箱</button>
    </div>

    <textarea id="savedEmails" readonly="" style="display:none"></textarea>

    <script>
        const savedEmails = new Set();

        document.getElementById('inputText').addEventListener('input', autoDetectDomains);

        function autoDetectDomains() {
            const text = document.getElementById('inputText').value;
            const emails = text.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\b/g);
            const allDomains = emails ? [...new Set(emails.map(email => email.split('@')[1]))] : [];

            const container = document.getElementById('domainSelectionContainer');
            container.innerHTML = '<label id="selectAllLabel"><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)" checked> 全选</label>';

            allDomains.forEach(domain => {
                const label = document.createElement('label');
                label.innerHTML = `<input type="checkbox" class="domain-checkbox" value="@${domain}" checked> @${domain}`;
                container.appendChild(label);
            });

            if (allDomains.length === 0) {
                const noDomainsLabel = document.createElement('label');
                noDomainsLabel.textContent = '未找到邮箱后缀';
                container.appendChild(noDomainsLabel);
            }
        }

        function toggleSelectAll(selectAllCheckbox) {
            const checkboxes = document.querySelectorAll('.domain-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
        }

        function toggleDomainSelection(show) {
            const dropdownContent = document.getElementById('domainSelectionContainer');
            if (!dropdownContent.contains(event.relatedTarget)) {
                dropdownContent.style.display = show ? 'block' : 'none';
            }
        }

        function extractEmails() {
            const text = document.getElementById("inputText").value;
            const selectedDomains = Array.from(document.querySelectorAll('.domain-checkbox:checked')).map(cb => cb.value);
            const emails = text.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\b/g);

            if (emails && selectedDomains.length > 0) {
                let filteredEmails = emails.filter(email => selectedDomains.some(domain => email.endsWith(domain)));
                filteredEmails.forEach(email => savedEmails.add(email));
                const uniqueEmails = Array.from(savedEmails);
                const resultText = uniqueEmails.join('\n');
                document.getElementById("emails").textContent = resultText;
                document.getElementById("emailCount").innerHTML = `邮箱数量: <span class="count-number">${uniqueEmails.length}</span>`;
                const uniqueDomains = new Set(uniqueEmails.map(email => email.split('@')[1]));
                document.getElementById("domainCount").innerHTML = `后缀数量: <span class="count-number">${uniqueDomains.size}</span>`;
                updateSavedEmailsTextarea();
            } else {
                showAlert("未找到邮箱地址或未选择后缀");
            }
            return false;
        }

        function clearText(input) {
            input.value = "";
            document.getElementById('domainSelectionContainer').innerHTML = '<label id="selectAllLabel"><input type="checkbox" id="selectAll" onclick="toggleSelectAll(this)" checked> 全选</label>';
	document.getElementById("domainSelection").textContent = "选择指定邮箱后缀";
        }

        function copyEmails() {
            const emails = document.getElementById("emails").textContent;
            const textarea = document.createElement("textarea");
            textarea.value = emails;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            showAlert("邮箱地址已复制到剪贴板");
        }

        function clearEmails() {
            document.getElementById("emails").textContent = "";
            document.getElementById("emailCount").innerHTML = '邮箱数量: <span class="count-number">0</span>';
            document.getElementById("domainCount").innerHTML = '后缀数量: <span class="count-number">0</span>';
            savedEmails.clear();
            updateSavedEmailsTextarea();
            showClearAlert("已清空~");
        }

        function showAlert(message) {
            const alert = document.getElementById("alert");
            alert.textContent = message;
            alert.style.display = "block";
            setTimeout(() => {
                alert.style.opacity = "0";
                setTimeout(() => {
                    alert.style.display = "none";
                    alert.style.opacity = "1";
                }, 300);
            }, 1000);
        }

        function showClearAlert(message) {
            const alert = document.getElementById("clear-alert");
            alert.textContent = message;
            alert.style.display = "block";
            setTimeout(() => {
                alert.style.opacity = "0";
                setTimeout(() => {
                    alert.style.display = "none";
                    alert.style.opacity = "1";
                }, 300);
            }, 1000);
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        function updateSavedEmailsTextarea() {
            document.getElementById("savedEmails").value = Array.from(savedEmails).join("\n");
        }

        function downloadSavedEmails() {
            const emailsText = Array.from(savedEmails).join("\n");
            const blob = new Blob([emailsText], { type: "text/plain" });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "亚伦邮箱.txt";
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('domainSelectionContainer').style.display = 'none';
        });
    </script>




</body></html>